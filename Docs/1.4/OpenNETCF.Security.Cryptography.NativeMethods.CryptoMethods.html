<html dir="LTR">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=Windows-1252" />
    <meta name="vs_targetSchema" content="http://schemas.microsoft.com/intellisense/ie5" />
    <title>Crypto Methods</title>
    <xml>
    </xml>
    <link rel="stylesheet" type="text/css" href="MSDN.css" />
  </head>
  <body id="bodyID" class="dtBODY">
    <div id="nsbanner">
      <div id="bannerrow1">
        <table class="bannerparthead" cellspacing="0">
          <tr id="hdr">
            <td class="runninghead">OpenNETCF Smart Device Framework 2.0</td>
            <td class="product">
            </td>
          </tr>
        </table>
      </div>
      <div id="TitleRow">
        <h1 class="dtH1">Crypto Methods</h1>
      </div>
    </div>
    <div id="nstext">
      <p>The methods of the <b>Crypto</b> class are listed below. For a complete list of <b>Crypto</b> class members, see the <a href="OpenNETCF.Security.Cryptography.NativeMethods.CryptoMembers.html">Crypto Members</a> topic.</p>
      <h4 class="dtH4">Public Static (Shared) Methods</h4>
      <div class="tablediv">
        <table class="dtTABLE" cellspacing="0">
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CeGenRandom.html">CeGenRandom</a></td><td width="50%"> This function fills a buffer with random bytes. You can use this function when Cryptography Services features are not available on your platform. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CPAcquireContext.html">CPAcquireContext</a></td><td width="50%"> This function acquires a handle to the key container specified by the pszContainer parameter. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptAcquireContext.html">CryptAcquireContext</a></td><td width="50%"> This function acquires a handle to a specific key container within a particular cryptographic service provider (CSP). This handle can be used to make calls to the selected CSP. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptContextAddRef.html">CryptContextAddRef</a></td><td width="50%"> This function adds one to the reference count of an HCRYPTPROV handle. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptCreateHash.html">CryptCreateHash</a></td><td width="50%"> This function initiates the hashing of a stream of data. It creates and returns to the calling application a handle to a cryptographic service provider (CSP) hash object. This handle is used in subsequent calls to the CryptHashData function and CryptHashSessionKey function to hash streams of data and session keys. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptDecrypt.html">CryptDecrypt</a></td><td width="50%"> This function decrypts data that was previously encrypted with the CryptEncrypt function. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptDeriveKey.html">CryptDeriveKey</a></td><td width="50%"> This function generates cryptographic session keys derived from base data. This function guarantees that all keys generated from the same base data are identical, provided the same cryptographic service provider (CSP) and algorithms are used. The base data can be a password or any other user data. This function is the same as the CryptGenKey function, except that the generated session keys are derived from base data instead of being random. The CryptDeriveKey function can only generate session keys and cannot be used to generate public/private key pairs. A handle to the session key is returned in the phKey parameter. This handle can then be used with any CryptoAPI functions that require key handles. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptDestroyHash.html">CryptDestroyHash</a></td><td width="50%"> This function destroys the hash object referenced by the hHash parameter. Once a hash object has been destroyed, it can no longer be used and its handle is useless from then on. All hash objects should be destroyed with the CryptDestroyHash function when the application is finished with them. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptDestroyKey.html">CryptDestroyKey</a></td><td width="50%"> This function releases the handle referenced by the hKey parameter. Once a key handle has been released, it becomes invalid and cannot be used again. If the handle refers to a session key, or to a public key that has been imported into the cryptographic service provider (CSP) through CryptImportKey, the CryptDestroyKey function destroys the key and frees the memory that the key occupied. Many CSPs scrub the memory where the key was held before freeing it.  On the other hand, if the handle refers to a public/private key pair obtained from the CryptGetUserKey function, the underlying key pair is not destroyed by the CryptDestroyKey function. Only the handle is destroyed. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptDuplicateHash.html">CryptDuplicateHash</a></td><td width="50%"> This function makes an exact copy of a hash and the state the hash is in. A hash can be created in a piece-by-piece way. This function can create separate hashes of two different contents that begin with the same content. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptDuplicateKey.html">CryptDuplicateKey</a></td><td width="50%"> This function makes an exact copy of a key and the state the key is in. Some keys have an associated state, for example, an initialization vector and/or a salt value. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptEncrypt.html">CryptEncrypt</a></td><td width="50%"> This function encrypts data. The key held by the cryptographic service provider (CSP) module and referenced by the hKey parameter specifies the algorithm used to encrypt the data parameter. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptEnumProviders.html">CryptEnumProviders</a></td><td width="50%"> This function retrieves the first or next available cryptographic service provider (CSP). Used in a loop, this function can retrieve in sequence all of the CSPs available on a computer. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptEnumProviderTypes.html">CryptEnumProviderTypes</a></td><td width="50%"> This function retrieves the first or next type of cryptographic service provider (CSP) supported on the computer. Used in a loop, this function retrieves in sequence all of the CSP types available on a computer. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptExportKey.html">CryptExportKey</a></td><td width="50%"> This function exports cryptographic keys from of a cryptographic service provider (CSP) in a secure manner. The caller passes to the CryptImportKey function a handle to the key to be exported and gets a key binary large object (BLOB). This key BLOB can be sent over a nonsecure transport or stored in a nonsecure storage location. The key BLOB is useless until the intended recipient uses the CryptImportKey function, which imports the key into the recipient's CSP. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptGenKey.html">CryptGenKey</a></td><td width="50%"> This function generates a random cryptographic session key or a public/private key pair for use with the cryptographic service provider (CSP) module. The function returns a handle to the key in the phKey parameter. This handle can then be used as needed with any of the other CryptoAPI functions requiring a key handle. When calling this function, the application must specify the algorithm. Because this algorithm type is kept bundled with the key, the application does not need to specify the algorithm later when the actual cryptographic operations are performed. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptGenRandom.html">CryptGenRandom</a></td><td width="50%"> This function fills a buffer with random bytes. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptGetDefaultProvider.html">CryptGetDefaultProvider</a></td><td width="50%"> This function finds the default cryptographic service provider (CSP) of a specified type either for the current user or the device. The name of the default CSP for the type specified in the dwProvType parameter is returned in the pszProvName buffer. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptGetHashParam.html">CryptGetHashParam</a></td><td width="50%"> This function retrieves data that governs the operations of a hash object and retrieves the actual hash value. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptGetKeyParam.html">CryptGetKeyParam</a></td><td width="50%"> This function lets applications retrieve data that governs the operations of a key. In the Microsoft cryptographic service providers (CSPs), the base symmetric keying material is not obtainable by this or any other function. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptGetProvParam.html">CryptGetProvParam</a></td><td width="50%"> This function retrieves parameters that govern the operations of a cryptographic service provider (CSP). </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptGetUserKey.html">CryptGetUserKey</a></td><td width="50%"> This function retrieves a handle to a permanent user key pair, such as the user's signature key pair. This function also retrieves a handle to one of a user's two public/private key pairs. Only the owner of the public/private key pairs uses the function and only when the handle to a cryptographic service provider (CSP) and its associated key container is available. Use the CryptAcquireCertificatePrivateKey function if the user's certificate is available, but not the CSP handle. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptHashData.html">CryptHashData</a></td><td width="50%"> This function adds data to a specified hash object. This function and the CryptHashSessionKey function can be called multiple times to compute the hash on long streams or on discontinuous streams. Before calling this function, the CryptCreateHash function must be called to create a handle to a hash object. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptHashSessionKey.html">CryptHashSessionKey</a></td><td width="50%"> This function computes the cryptographic hash of a session key object. This function can be called multiple times with the same hash handle to compute the hash of multiple keys. Calls to the CryptHashSessionKey function can be interspersed with calls to the CryptHashData function. Before calling this function, the CryptCreateHash function must be called to get a handle to a hash object. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptImportKey.html">CryptImportKey</a></td><td width="50%"> This function transfers a cryptographic key from a key binary large object (BLOB) to the cryptographic service provider (CSP). This function can be used to import an Schannel session key, regular session key, public key, or public/private key pair. For all but the public key, the key or key pair is encrypted. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptProtectData.html">CryptProtectData</a></td><td width="50%"> This function performs encryption on the data in a DATA_BLOB structure. Typically, only a user with the same logon credentials as the encrypter can decrypt the data. In addition, the encryption and decryption usually must be done on the same computer. For information about exceptions, see the Remarks section. Note An untrusted application can call the CryptProtectData function. The call will fail only if CRYPTPROTECT_SYSTEM is specified for the dwFlags parameter. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptReleaseContext.html">CryptReleaseContext</a></td><td width="50%"> This function releases the handle to a cryptographic service provider (CSP) and the key container. At each call to this function, the reference count on the CSP is reduced by one. When the reference count reaches zero, the context is fully released and it can no longer be used by any function in the application. The application calls this function when it is finished using the CSP. After this function is called, the CSP handle specified by the hProv parameter is no longer valid; however, the function does not destroy either the key container or any key pairs. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptSetHashParam.html">CryptSetHashParam</a></td><td width="50%"> This function customizes the operations of a hash object. Currently, only a single parameter is defined for this function. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptSetKeyParam.html">CryptSetKeyParam</a></td><td width="50%"> This function customizes various aspects of a key's operations. The values set by this function are not persisted to memory and are used only within a single session. The Microsoft cryptographic service providers (CSPs) do not allow setting the values for key exchange or signature keys; however, custom providers may define parameters that can be set on these keys. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptSetProvider.html">CryptSetProvider</a></td><td width="50%"> This function specifies the current user default cryptographic service provider (CSP). Typical applications do not use this function. It is intended for use solely by administrative applications. If a current user's default provider is set, that default provider is acquired by any call by that user to the CryptAcquireContext function specifying a dwProvType provider type but not a CSP name. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptSetProviderEx.html">CryptSetProviderEx</a></td><td width="50%"> This function specifies the default cryptographic service provider (CSP) for the current user or the local device. If a current user's default provider is set, that default provider is acquired by any call by that user to the CryptAcquireContext function specifying a dwProvType provider type but not a CSP name. If a local computer default is set, calls to the CryptAcquireContext function by a user not having a current user default set and not specifying a CSP result in the use of the local computer's default CSP. Typical applications do not use this function. It is intended for use solely by administrative applications. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptSetProvParam.html">CryptSetProvParam</a></td><td width="50%"> This function customizes the operations of a cryptographic service provider (CSP). This function is commonly used to set a security descriptor on the key container associated with a CSP to control access to the private keys in that key container. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptSignHash.html">CryptSignHash</a></td><td width="50%"> This function signs data. Because all signature algorithms are asymmetric and therefore slow, the CryptoAPI does not let data be signed directly. Instead, you must first hash the data and then use the CryptSignHash function to sign the hash value. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptUnprotectData.html">CryptUnprotectData</a></td><td width="50%"> This function decrypts and checks the integrity of the data in a DATA_BLOB structure. Usually, only a user with the same logon credentials as the encrypter can decrypt the data. In addition, the encryption and decryption must be done on the same computer. Note An untrusted application can call the CryptUnprotectData function. The call will fail only if CRYPTPROTECT_SYSTEM is specified for the dwFlags parameter. </td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><img src="static.gif" /><a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.CryptVerifySignature.html">CryptVerifySignature</a></td><td width="50%"> This function verifies the signature of a hash object. Before calling this function, the CryptCreateHash function must be called to get a handle to a hash object. The CryptHashData function or CryptHashSessionKey function is then used to add the data or session keys to the hash object. After the call to the CryptVerifySignature function has been completed, only the CryptDestroyHash function can be called using the hHash handle. </td></tr></table>
      </div>
      <h4 class="dtH4">Public Instance Methods</h4>
      <div class="tablediv">
        <table class="dtTABLE" cellspacing="0">
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/frlrfSystemObjectClassEqualsTopic.asp">Equals</a> (inherited from <b>Object</b>)</td><td width="50%">Determines whether the specified <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/frlrfSystemObjectClassTopic.asp">Object</a> is equal to the current <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/frlrfSystemObjectClassTopic.asp">Object</a>.</td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/frlrfSystemObjectClassGetHashCodeTopic.asp">GetHashCode</a> (inherited from <b>Object</b>)</td><td width="50%">Serves as a hash function for a particular type. <b>GetHashCode</b> is suitable for use in hashing algorithms and data structures like a hash table.</td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/frlrfSystemObjectClassGetTypeTopic.asp">GetType</a> (inherited from <b>Object</b>)</td><td width="50%">Gets the <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/frlrfSystemTypeClassTopic.asp">Type</a> of the current instance.</td></tr>
<tr VALIGN="top"><td width="50%"><img src="pubmethod.gif"></img><a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/frlrfSystemObjectClassToStringTopic.asp">ToString</a> (inherited from <b>Object</b>)</td><td width="50%">Returns a <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/frlrfSystemStringClassTopic.asp">String</a> that represents the current <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/frlrfSystemObjectClassTopic.asp">Object</a>.</td></tr></table>
      </div>
      <h4 class="dtH4">Protected Instance Methods</h4>
      <div class="tablediv">
        <table class="dtTABLE" cellspacing="0">
<tr VALIGN="top"><td width="50%"><img src="protmethod.gif"></img><a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/frlrfSystemObjectClassFinalizeTopic.asp">Finalize</a> (inherited from <b>Object</b>)</td><td width="50%">Allows an <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/frlrfSystemObjectClassTopic.asp">Object</a> to attempt to free resources and perform other cleanup operations before the <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/frlrfSystemObjectClassTopic.asp">Object</a> is reclaimed by garbage collection.</td></tr>
<tr VALIGN="top"><td width="50%"><img src="protmethod.gif"></img><a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/frlrfSystemObjectClassMemberwiseCloneTopic.asp">MemberwiseClone</a> (inherited from <b>Object</b>)</td><td width="50%">Creates a shallow copy of the current <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/frlrfSystemObjectClassTopic.asp">Object</a>.</td></tr></table>
      </div>
      <h4 class="dtH4">See Also</h4>
      <p>
        <a href="OpenNETCF.Security.Cryptography.NativeMethods.Crypto.html">Crypto Class</a> | <a href="OpenNETCF.Security.Cryptography.NativeMethods.html">OpenNETCF.Security.Cryptography.NativeMethods Namespace</a></p>
      <object type="application/x-oleobject" classid="clsid:1e2a7bd0-dab9-11d0-b93a-00c04fc99f9e" viewastext="true" style="display: none;">
        <param name="Keyword" value="Crypto class, methods">
        </param>
      </object>
      <hr />
      <div id="footer">
        <p>
          <a href="mailto:docs@opennetcf.org?subject=OpenNETCF%20Smart%20Device%20Framework%202.0%20Documentation%20Feedback:%20Crypto Methods">Send comments on this topic.</a>
        </p>
        <p>
          <a href="http://www.opennetcf.org">Copyright © 2003-2006 OpenNETCF Consulting LLC</a>
        </p>
        <p>Generated from assembly OpenNETCF [2.0.0.0]</p>
      </div>
    </div>
  </body>
</html>